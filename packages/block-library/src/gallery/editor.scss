@import "./tiles/editor.scss";
@import "./inline-menu.scss";

figure.blocks-gallery-image {

	// Hide the focus outline that otherwise briefly appears when selecting a block.
	&:not(.is-selected):focus {
		outline: none;
	}

	&.is-selected {
		outline: 4px solid theme(primary);
	}

	&.is-transient img {
		opacity: 0.3;
	}

	.block-editor-rich-text {
		position: absolute;
		bottom: 0;
		width: 100%;
		max-height: 100%;
		overflow-y: auto;
	}

	&.is-selected .block-editor-rich-text {
		// IE calculates this incorrectly, so leave it to modern browsers.
		@supports (position: sticky) {
			right: 0;
			left: 0;
			margin-top: -4px;
		}

		// Override negative margins so this toolbar isn't hidden by overflow. Overflow is needed for long captions.
		.block-editor-rich-text__inline-toolbar {
			top: 0;
		}

		// Make extra space for the inline toolbar.
		figcaption {
			padding-top: 48px;
		}
	}

	.block-editor-rich-text figcaption {
		position: relative;
		overflow: hidden;

		a {
			color: $white;
		}
	}
}
